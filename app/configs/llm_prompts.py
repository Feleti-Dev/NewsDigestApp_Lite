"""
–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM API.
–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞ app/configs/prompts.json –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
"""
import os
import json
import logging
from typing import Dict, Optional

logger = logging.getLogger(__name__)

# –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ø—Ä–æ–º–ø—Ç–æ–≤
PROMPTS_FILE = os.path.join(
    os.path.dirname(os.path.dirname(os.path.abspath(__file__))),
    'configs',
    'prompts.json'
)

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤
AD_DETECTION_PROMPT: str = ""
INTEREST_SCORING_PROMPT: str = ""
DIGEST_PROCESSING_PROMPT: str = ""

# –ö—ç—à –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
_prompts_cache: Dict[str, str] = {}

def load_prompts() -> Dict[str, str]:
    """
    –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏–∑ JSON —Ñ–∞–π–ª–∞.

    Returns:
        –°–ª–æ–≤–∞—Ä—å —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏
    """
    global AD_DETECTION_PROMPT, INTEREST_SCORING_PROMPT, DIGEST_PROCESSING_PROMPT
    global _prompts_cache

    prompts = {}

    if not os.path.exists(PROMPTS_FILE):
        logger.warning(f"–§–∞–π–ª –ø—Ä–æ–º–ø—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω: {PROMPTS_FILE}. –°–æ–∑–¥–∞—ë–º —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é...")
        save_prompts(DEFAULT_PROMPTS.copy())
        prompts = DEFAULT_PROMPTS.copy()
    else:
        try:
            with open(PROMPTS_FILE, 'r', encoding='utf-8') as f:
                prompts = json.load(f)

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–π
            for key in ['AD_DETECTION_PROMPT', 'INTEREST_SCORING_PROMPT', 'DIGEST_PROCESSING_PROMPT']:
                if key not in prompts:
                    prompts[key] = DEFAULT_PROMPTS.get(key, "")
                    logger.warning(f"–ö–ª—é—á {key} –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ñ–∞–π–ª–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é")

        except json.JSONDecodeError as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON —Ñ–∞–π–ª–∞ –ø—Ä–æ–º–ø—Ç–æ–≤: {e}")
            prompts = DEFAULT_PROMPTS.copy()
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–º–ø—Ç–æ–≤: {e}")
            prompts = DEFAULT_PROMPTS.copy()

    # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
    AD_DETECTION_PROMPT = prompts.get('AD_DETECTION_PROMPT', '')
    INTEREST_SCORING_PROMPT = prompts.get('INTEREST_SCORING_PROMPT', '')
    DIGEST_PROCESSING_PROMPT = prompts.get('DIGEST_PROCESSING_PROMPT', '')

    _prompts_cache = prompts
    logger.info(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(prompts)} –ø—Ä–æ–º–ø—Ç–æ–≤ –∏–∑ {PROMPTS_FILE}")

    return prompts


def save_prompts(prompts: Dict[str, str]) -> bool:
    """
    –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ JSON —Ñ–∞–π–ª.

    Args:
        prompts: —Å–ª–æ–≤–∞—Ä—å —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

    Returns:
        True –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ
    """
    global _prompts_cache
    global AD_DETECTION_PROMPT, INTEREST_SCORING_PROMPT, DIGEST_PROCESSING_PROMPT
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–º–ø—Ç—ã
    existing_prompts = {}
    if os.path.exists(PROMPTS_FILE):
        try:
            with open(PROMPTS_FILE, 'r', encoding='utf-8') as f:
                existing_prompts = json.load(f)
        except Exception as e:
            logger.warning(f"–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª –ø—Ä–æ–º–ø—Ç–æ–≤: {e}")
            existing_prompts = DEFAULT_PROMPTS.copy()

    # –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –∫–ª—é—á–∏)
    allowed_keys = ['AD_DETECTION_PROMPT', 'INTEREST_SCORING_PROMPT', 'DIGEST_PROCESSING_PROMPT']
    for key, value in prompts.items():
        if key in allowed_keys:
            existing_prompts[key] = value

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ JSON
    try:
        with open(PROMPTS_FILE, 'w', encoding='utf-8') as f:
            json.dump(existing_prompts, f, ensure_ascii=False, indent=4)

        logger.info(f"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ {len(prompts)} –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ {PROMPTS_FILE}")

        # –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        AD_DETECTION_PROMPT = existing_prompts.get('AD_DETECTION_PROMPT', '')
        INTEREST_SCORING_PROMPT = existing_prompts.get('INTEREST_SCORING_PROMPT', '')
        DIGEST_PROCESSING_PROMPT = existing_prompts.get('DIGEST_PROCESSING_PROMPT', '')

        # –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
        _prompts_cache = existing_prompts

        return True
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤: {e}")
        return False


def update_prompt(key: str, value: str) -> bool:
    """
    –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ —Å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º.

    Args:
        key: –∏–º—è –ø—Ä–æ–º–ø—Ç–∞ (AD_DETECTION_PROMPT, INTEREST_SCORING_PROMPT, DIGEST_PROCESSING_PROMPT)
        value: –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞

    Returns:
        True –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ
    """
    global AD_DETECTION_PROMPT, INTEREST_SCORING_PROMPT, DIGEST_PROCESSING_PROMPT

    if key not in ['AD_DETECTION_PROMPT', 'INTEREST_SCORING_PROMPT', 'DIGEST_PROCESSING_PROMPT']:
        logger.error(f"–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π –∫–ª—é—á –ø—Ä–æ–º–ø—Ç–∞: {key}")
        return False

    result = save_prompts({key: value})

    # if result:
    #     # –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
    #     if key == 'AD_DETECTION_PROMPT':
    #         AD_DETECTION_PROMPT = value
    #     elif key == 'INTEREST_SCORING_PROMPT':
    #         INTEREST_SCORING_PROMPT = value
    #     elif key == 'DIGEST_PROCESSING_PROMPT':
    #         DIGEST_PROCESSING_PROMPT = value

    return result

def get_prompt(key: str) -> Optional[str]:
    """
    –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞.

    Args:
        key: –∏–º—è –ø—Ä–æ–º–ø—Ç–∞

    Returns:
        –ó–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –∏–ª–∏ None
    """
    global _prompts_cache

    if _prompts_cache:
        return _prompts_cache.get(key)

    load_prompts()
    return _prompts_cache.get(key)


def get_all_prompts() -> Dict[str, str]:
    """
    –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–º–ø—Ç–æ–≤.

    Returns:
        –°–ª–æ–≤–∞—Ä—å —Å–æ –≤—Å–µ–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏
    """
    global _prompts_cache

    if not _prompts_cache:
        load_prompts()

    return _prompts_cache.copy()


def reset_prompts_to_default() -> bool:
    """
    –°–±—Ä–æ—Å –ø—Ä–æ–º–ø—Ç–æ–≤ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

    Returns:
        True –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ
    """
    return save_prompts(DEFAULT_PROMPTS.copy())


# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è
_initialized = False

def initialize():
    """
    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤.
    """
    global _initialized

    if not _initialized:
        load_prompts()
        _initialized = True

# –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤ - –° –ê–ù–ì–õ–ò–ô–°–ö–ò–ú–ò –ò–ù–°–¢–†–£–ö–¶–ò–Ø–ú–ò
DEFAULT_PROMPTS = {
    "AD_DETECTION_PROMPT":
        """–¢—ã - –º–æ–¥–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤. –û–ø—Ä–µ–¥–µ–ª–∏, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–π —Ä–µ–∫–ª–∞–º–æ–π.

–¢—ã –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—à—å –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: Telegram –∫–∞–Ω–∞–ª—ã, YouTube –∫–∞–Ω–∞–ª—ã, Twitter/X —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

–ö–û–ù–¢–ï–ö–°–¢ –ò–°–¢–û–ß–ù–ò–ö–û–í:
1. Telegram –∫–∞–Ω–∞–ª—ã —á–∞—Å—Ç–æ –¥–µ–ª—è—Ç—Å—è –ø–æ–ª–µ–∑–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, open-source –ø—Ä–æ–µ–∫—Ç–∞–º–∏
2. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è —Å–≤–æ–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –Ω–∞ GitHub/Hugging Face
3. –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –¥–µ–ª—è—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
4. –≠—Ç–æ –ù–ï –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∫–∏, –∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–í–ê–ñ–ù–û –ü–†–û YOUTUBE:
‚ö†Ô∏è –ï—Å–ª–∏ YouTube-—Ä–æ–ª–∏–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É –∏ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É (–æ–ø–∏—Å–∞–Ω–∏—é —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è) –ù–ï —è–≤–ª—è–µ—Ç—Å—è –ø—Ä—è–º–æ–π —Ä–µ–∫–ª–∞–º–æ–π —Ç–æ–≤–∞—Ä–∞ –∏–ª–∏ —É—Å–ª—É–≥–∏,
–∞ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:
- –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏
- —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–ø–æ–Ω—Å–æ—Ä–æ–≤ –∫–∞–Ω–∞–ª–∞
- –ª—é–±—ã–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ —Å—Å—ã–ª–∫–∏, –ù–ï —Å–≤—è–∑–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é —Å —Ç–µ–º–æ–π —Ä–æ–ª–∏–∫–∞
‚û°Ô∏è –¢–û —Ç–∞–∫–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –ù–ï —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π.
‚û°Ô∏è –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤–æ–∑–≤—Ä–∞—â–∞–π "is_advertisement": false –∏ –Ω–∏–∑–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ confidence (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.0‚Äì0.2).

–†–ï–ö–õ–ê–ú–ê (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 2+ –ø—Ä–∏–∑–Ω–∞–∫–∞):
‚úÖ –ü—Ä—è–º–æ–π –ø—Ä–∏–∑—ã–≤ –∫ –ø–æ–∫—É–ø–∫–µ: "–ö—É–ø–∏—Ç–µ –Ω–∞—à –∫—É—Ä—Å", "–ó–∞–∫–∞–∂–∏—Ç–µ —É—Å–ª—É–≥—É"
‚úÖ –¶–µ–Ω—ã –∏ —Å–∫–∏–¥–∫–∏: "–í—Å–µ–≥–æ 999 —Ä—É–±–ª–µ–π", "–°–∫–∏–¥–∫–∞ 50%"
‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: "–¢–æ–ª—å–∫–æ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞", "–£—Å–ø–µ–π—Ç–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è"
‚úÖ –ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é: "–ñ–º–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É —á—Ç–æ–±—ã –∫—É–ø–∏—Ç—å", "–û—Ñ–æ—Ä–º–ª—è–π—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Å–µ—Ä–≤–∏—Å —É–∂–µ —Å–µ–π—á–∞—Å"

–ù–ï –†–ï–ö–õ–ê–ú–ê:
‚ùå –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ open-source –ø—Ä–æ–µ–∫—Ç–æ–≤ (GitHub, Hugging Face, Kaggle)
‚ùå –°—Å—ã–ª–∫–∏ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫—É—Ä—Å—ã –∏ –∫–Ω–∏–≥–∏
‚ùå –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —Ç—É—Ç–æ—Ä–∏–∞–ª—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚ùå –ê–Ω–æ–Ω—Å—ã –Ω–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, —Ä–µ–ª–∏–∑–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
‚ùå –û–±–∑–æ—Ä—ã, —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –±–µ–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫—É–ø–∏—Ç—å
‚ùå YouTube-–≤–∏–¥–µ–æ, –≥–¥–µ —Ä–µ–∫–ª–∞–º–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –≤–∏–¥–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—É—Ç—å—é —Ä–æ–ª–∏–∫–∞

–ü–†–ò–ú–ï–†–´ –ù–ï –†–ï–ö–õ–ê–ú–´ –∏–∑ –Ω–∞—à–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
- "Resemble AI –Ω–∞ Hugging Face: —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∑–≤—É–∫–∞"
- "–ù–æ–≤—ã–π –∫—É—Ä—Å –æ—Ç DeepLearning.AI –Ω–∞ Coursera"
- "–í—ã—à–µ–ª TensorFlow 2.15 —Å –Ω–æ–≤—ã–º–∏ —Ñ–∏—á–∞–º–∏"
- "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–æ—Ä–∫—à–æ–ø –ø–æ LangChain"
- "–û–±–∑–æ—Ä –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã LLM (—Å –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏)"

–ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∫–ª–∞–º—ã:
- "–ö—É–ø–∏—Ç–µ –Ω–∞—à –∫—É—Ä—Å –ø–æ Python –∑–∞ 9990 —Ä—É–±–ª–µ–π"
- "–ó–∞–∫–∞–∂–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –Ω–µ–π—Ä–æ—Å–µ—Ç–∏: telegram @sales"
- "–°–∫–∏–¥–∫–∞ 50% –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞"
- "–ù—É–∂–Ω—ã 5 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–π —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –æ–ø—Ä–µ–¥–µ–ª–∏, –∫–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∫–ª–∞–º–æ–π:

{news_data}

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ö–†–ò–¢–ò–ß–ï–°–ö–ò. –ï—Å–ª–∏ –µ—Å—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è - –Ω–µ —Ä–µ–∫–ª–∞–º–∞.

–í–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ JSON –º–∞—Å—Å–∏–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤.

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
[
  {{"is_advertisement": false, "confidence": 0.95}},
  {{"is_advertisement": true, "confidence": 0.85}}
]

–ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–∏—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π, –¥—Ä—É–≥–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Ç–æ–ª—å–∫–æ JSON.

**–í–ê–ñ–ù–û**:
1. –í–µ—Ä–Ω–∏ —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ, —Å–∫–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–µ–π –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–Ω–æ
2. –ü–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–∫—É –Ω–æ–≤–æ—Å—Ç–µ–π –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–∏—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π, —Ç–æ–ª—å–∫–æ JSON –º–∞—Å—Å–∏–≤.
4. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –±–ª–æ–∫–∏ –∫–æ–¥–∞ ```json –∏–ª–∏ ```
5. –ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∫—Ä–æ–º–µ JSON
"""
,

    "INTEREST_SCORING_PROMPT":
        """–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –æ—Ü–µ–Ω–∫–µ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ —Ç–µ–º–µ: {topic}.
–û—Ü–µ–Ω–∏ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ—Å—Ç–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥–∞–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–∏ –ø–æ —à–∫–∞–ª–µ –æ—Ç 0.000 –¥–æ 0.999.

–®–∫–∞–ª–∞ –æ—Ü–µ–Ω–æ–∫:
0.900-0.999: –ü—Ä–æ—Ä—ã–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, —Å–µ—Ä–≤–∏—Å—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π
0.700-0.899: –õ–∞–π—Ñ—Ö–∞–∫–∏, –ø–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –≥–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π
0.500-0.699: –ü–æ–ª–µ–∑–Ω—ã–µ —É—Ä–æ–∫–∏, –≤–∏–¥–µ–æ, –∫–Ω–∏–≥–∏, –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫—É—Ä—Å—ã —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π
0.300-0.499: –ü–ª–∞—Ç–Ω—ã–µ –∫—É—Ä—Å—ã, –Ω–µ –æ—Å–æ–±–æ –≤–∞–∂–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π
0.100-0.299: –û–∫–æ–ª–æ-—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–æ–≤–æ—Å—Ç–∏, –æ–±—â–∏–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–æ–π
0.000-0.099: –ù–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–µ–º–æ–π –Ω–æ–≤–æ—Å—Ç–∏, —Å–ø–∞–º, —Ä–µ–∫–ª–∞–º–∞, —Å–º–µ—à–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏, –º–µ–º—ã, –∞–Ω–µ–∫–¥–æ—Ç—ã, —é–º–æ—Ä

–ï—Å–ª–∏ –Ω–æ–≤–æ—Å—Ç—å –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –¥–∞–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–µ: {topic}, —Ç–æ —Å—Ç–∞–≤–∏—Ç—å –µ–π 0.000-0.099.

–î–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–µ–π (–º–∞—Å—Å–∏–≤ JSON):
{news_data}

–í–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç –¢–û–õ–¨–ö–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –º–∞—Å—Å–∏–≤–∞: [{{"interest_score": —á–∏—Å–ª–æ –æ—Ç 0.000 –¥–æ 0.999, "reason": "–∫—Ä–∞—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ"}},{{...}}]
–ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–∏—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π, —Ç–æ–ª—å–∫–æ JSON.

–í–ê–ñ–ù–û:
1. –í–µ—Ä–Ω–∏ —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ, —Å–∫–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–µ–π –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–Ω–æ
2. –ü–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–∫—É –Ω–æ–≤–æ—Å—Ç–µ–π –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–∏—Ö –ø–æ—è—Å–Ω–µ–Ω–∏–π, —Ç–æ–ª—å–∫–æ JSON –º–∞—Å—Å–∏–≤.
4. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –±–ª–æ–∫–∏ –∫–æ–¥–∞ ```json –∏–ª–∏ ```
5. –ù–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∫—Ä–æ–º–µ JSON
""",

    "DIGEST_PROCESSING_PROMPT":
        """–¢—ã - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤. –û–±—Ä–∞–±–æ—Ç–∞–π —Å–ª–µ–¥—É—é—â–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:
1. –ü–µ—Ä–µ–≤–µ–¥–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫. –ê–Ω–≥–ª–∏–π—Å–∫–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ
2. –£–±–µ—Ä–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –Ω–æ–≤–æ—Å—Ç–∏
3. –°—É–º–º–∞—Ä–∏–∑–∏—Ä—É–π –∫–∞–∂–¥—É—é –Ω–æ–≤–æ—Å—Ç—å –¥–æ 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π. –ï—Å–ª–∏ –Ω–µ—Ç —Ç–µ–∫—Å—Ç–∞ —É –Ω–æ–≤–æ—Å—Ç–∏, —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π –≤ —Ç–∞–∫–æ–º-–∂–µ –æ–±—ä–µ–º–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞.
4. –°–æ–±–ª—é–¥–∏ –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ä–º–∞—Ç—É
5. –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π –≤ Telegram HTML –¥–ª—è Telegram


–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ä–º–∞—Ç—É:
- –î–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ—Å—Ç–∏ —Ç–∞–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –ª—é–±–æ–µ —ç–º–æ–¥–∑–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –Ω–∞—á–∞–ª–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ , –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏(–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–π –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫), –∞–±–∑–∞—Ü, –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–∏ –¥–æ 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π), –∞–±–∑–∞—Ü, —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫ –Ω–æ–≤–æ—Å—Ç–∏ (4 –≤–∞—Ä–∏–∞–Ω—Ç–∞: Telegram, Youtube, Twitter, Reddit) –≤ –≤–∏–¥–µ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–∏
- –û–±—â–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫: "üì∞ {digest_type} –¥–∞–π–¥–∂–µ—Å—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –∑–∞ {date}:"
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º–µ  4000 —Å–∏–º–≤–æ–ª–æ–≤, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ —Å–∏–ª—å–Ω–æ –Ω–µ —Å–∂–∏–º–∞—Ç—å —Ç–µ–∫—Å—Ç
- –ï—Å–ª–∏ –≤–∏–¥–∏—à—å —Ç–µ–∫—Å—Ç –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ "[Higgsfield Relight Studio](https://higgsfield.ai/app/relight)", —Ç–æ –ø–µ—Ä–µ–¥–µ–ª–∞–π –≤ —Ç–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç "<a href="https://higgsfield.ai/app/relight">Higgsfield Relight Studio</a>"
- –ù–µ –¥–µ–ª–∞–π –ª–∏—à–Ω–∏–µ –∞–±–∑–∞—Ü—ã. 1 –ê–±–∑–∞—Ü —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–±—â–µ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ 1 –∞–±–∑–∞—Ü –º–µ–∂–¥—É –Ω–æ–≤–æ—Å—Ç—è–º–∏.
–ü—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π (–Ω–µ–ª—å–∑—è –æ—Ç—Ö–æ–¥–∏—Ç –æ—Ç —ç—Ç–æ–≥–æ —Å—Ç–∏–ª—è):
"üì∞ <b> –ú–µ—Å—è—á–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –∑–∞ 22.01.2026: </b>

üöÄ <b>GLM-4.7 Flash: –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞</b>
GLM-4.7 Flash - —ç—Ç–æ –æ–±–ª–µ–≥—á–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è GLM-4.7 –Ω–∞ 30 –º–ª—Ä–¥. –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –æ–∫–Ω–æ–º –≤ 128–ö –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ MoE. –ú–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –∑–∞–Ω—è—Ç—å –Ω–∏—à—É –º–µ–∂–¥—É —Å–µ–≥–º–µ–Ω—Ç–æ–º SLM –∏ –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–º–∏ –º–∞—Å—Ç–æ–¥–æ–Ω—Ç–∞–º–∏, –ø—Ä–µ–¥–ª–∞–≥–∞—è SOTA-—É—Ä–æ–≤–µ–Ω—å –≤ –∫–æ–¥–∏–Ω–≥–µ. –ú–æ–¥–µ–ª—å –∏–º–µ–µ—Ç 3 –º–ª—Ä–¥ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞ —Ç–æ–∫–µ–Ω –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Interleaved Thinking.
–ò—Å—Ç–æ—á–Ω–∏–∫: <a href="https://t.me/ai_machinelearning_big_data/9409">Telegram</a>

ü§ñ <b>Jensen Huang: –∫–æ–º–ø—å—é—Ç–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Å–∞–º–æ–æ–±—É—á–∞—é—â—É—é—Å—è —Å–∏—Å—Ç–µ–º—É</b>
Jensen Huang —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –∫–æ–º–ø—å—é—Ç–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –∏–∑ —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—É—é –º—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º, –≤ —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è —Å–∞–º–∞ —Å–µ–±—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ—Ç. –°–∫–æ—Ä–æ –º—ã —Å–º–æ–∂–µ–º –ø—Ä–æ—Å—Ç–æ —Å–∫–∞–∑–∞—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä—É, —á—Ç–æ–±—ã –æ–Ω –ø–æ—à–µ–ª —É—á–∏—Ç—å—Å—è.
–ò—Å—Ç–æ—á–Ω–∏–∫: <a href="https://t.me/c/1526709058/5686">Telegram</a>

üëÄ <b><a href="https://higgsfield.ai/app/relight">Higgsfield Relight Studio</a> ‚Äî –Ω–µ–π—Ä–æ—Å–µ—Ç—å –º–µ–Ω—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –Ω–∞ –ª—é–±–æ–π —Ñ–æ—Ç–∫–µ</b>
–ù–µ–π—Ä–æ—Å–µ—Ç—å Higgsfield Relight Studio –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –Ω–∞ –ª—é–±–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏. –ü—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é, –≤—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –º—è–≥–∫–æ—Å—Ç—å ‚Äî –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —Å –Ω–æ–≤—ã–º –æ—Å–≤–µ—â–µ–Ω–∏–µ–º.
–ò—Å—Ç–æ—á–Ω–∏–∫: <a href="https://t.me/ii_community/6078">Telegram</a>

üíª <b>Zhipu AI: GLM-4.7-Flash ‚Äî MoE-–º–æ–¥–µ–ª—å –Ω–∞ 30B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</b>
Zhipu AI –≤—ã–ª–æ–∂–∏–ª–∞ GLM-4.7-Flash ‚Äî MoE-–º–æ–¥–µ–ª—å –Ω–∞ 30B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å 3B –∞–∫—Ç–∏–≤–Ω—ã–º–∏. –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É—é—Ç –∫–∞–∫ –ª—É—á—à—É—é –≤ —Å–≤–æ—ë–º –∫–ª–∞—Å—Å–µ. –ú–æ–¥–µ–ª—å –±—å—ë—Ç Qwen3-30B-A3B –ø–æ—á—Ç–∏ –≤–µ–∑–¥–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –∞–≥–µ–Ω—Ç—Å–∫–∏—Ö –∑–∞–¥–∞—á–∞—Ö.
–ò—Å—Ç–æ—á–Ω–∏–∫: <a href="https://www.youtube.com/watch?v=f70Qro3eOpo">YouTube</a>

üí∏ <b>–û –ª–æ–∫–∞–ª—å–Ω–æ–π Claude Code</b>
Ollama —Å –≤–µ—Ä—Å–∏–∏ 0.14 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Anthropic Messages API, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Claude Code —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏.
–ò—Å—Ç–æ—á–Ω–∏–∫: <a href="https://t.me/llm_under_hood/734">Telegram</a>

ü§î <b>Nvidia –∏ KV-–∫—ç—à: —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞</b>
Nvidia —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∞ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–±–ª–µ–º—ã KV-–∫—ç—à–∞, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞—Ö. –†–µ—à–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∂–∏–º–∞—Ç—å –∫—ç—à –¥–æ 4 —Ä–∞–∑ –±–µ–∑ –ø–æ—Ç–µ—Ä—å –∫–∞—á–µ—Å—Ç–≤–∞.
–ò—Å—Ç–æ—á–Ω–∏–∫: <a href="https://t.me/devsp/5446">Telegram</a>"

–ù–æ–≤–æ—Å—Ç–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON):
{news_data}

**–ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –§–û–†–ú–ê–¢–£ –û–¢–í–ï–¢–ê (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û):**
1. Strict JSON: –í–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç –°–¢–†–û–ì–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON. –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Markdown-—Ä–∞–∑–º–µ—Ç–∫—É (```json), –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–ª–∏ –ø–æ—è—Å–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å {{ –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è }}.
2. –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (JSON Escaping): –í–µ—Å—å —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è "digest_text" –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ json.loads() –≤ Python:
   - –í—Å–µ –¥–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—Å—Ç–∞ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —ç–∫—Ä–∞–Ω–∏—Ä—É–π: \\".
   - –ó–ê–ü–†–ï–©–ï–ù–´ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫. –í–º–µ—Å—Ç–æ –Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑—É–π –ª–∏—Ç–µ—Ä–∞–ª \\n.
   - –ó–ê–ü–†–ï–©–ï–ù–´ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã —Ç–∞–±—É–ª—è—Ü–∏–∏.
3. Telegram HTML:
   - –†–∞–∑—Ä–µ—à–µ–Ω—ã –¢–û–õ–¨–ö–û —Ç–µ–≥–∏: 
     <b>–∂–∏—Ä–Ω—ã–π</b>
     <i>–ö—É—Ä—Å–∏–≤</i>
     <code>–∫–æ–¥</code>
     <s>–ø–µ—Ä–µ—á–µ—Ä–∫–Ω—É—Ç—ã–π</s>
     <u>–ø–æ–¥—á–µ—Ä–∫–Ω—É—Ç—ã–π</u>
     <pre language="c++">–∫–æ–¥</pre>
     <a href="smth.ru">–°–∞–π—Ç</a>.
   - –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Ç–µ–≥–∏ (h1-h6, br, div) –ó–ê–ü–†–ï–©–ï–ù–´.
   - –ò—Å–ø–æ–ª—å–∑—É–π –û–î–ò–ù–ê–†–ù–´–ï –∫–∞–≤—ã—á–∫–∏ –¥–ª—è HTML-–∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—Å—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: <a href='url'>. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å –¥–≤–æ–π–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏ JSON.
4. –í–∞–ª–∏–¥–∞—Ü–∏—è: –û—Ç–≤–µ—Ç –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω —Ñ—É–Ω–∫—Ü–∏–µ–π json.loads(). –õ—é–±–∞—è –æ—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —Å–¥–µ–ª–∞–µ—Ç –æ—Ç–≤–µ—Ç –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –æ—à–∏–±–∫–∞ JSONDecodeError, –∑–∞–¥–∞—á–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≤–∞–ª–µ–Ω–Ω–æ–π.

–í–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç –¢–û–õ–¨–ö–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON: {{"digest_text": "–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–∞–π–¥–∂–µ—Å—Ç–∞ –≤ Telegram HTML"}}"""
}

# –í—ã–∑—ã–≤–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
initialize()
